# MCP å¼€å‘å…¥é—¨ä¸å®æˆ˜

---

## ä¸€ã€ä»€ä¹ˆæ˜¯ MCP

**MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰** æ˜¯ç”± Anthropic äº 2024 å¹´ 11 æœˆæ¨å‡ºçš„å¼€æ”¾åè®®ï¼Œç”¨äºæ ‡å‡†åŒ– AI åº”ç”¨ç¨‹åºä¸å¤–éƒ¨æ•°æ®æºã€å·¥å…·ä¹‹é—´çš„é›†æˆæ–¹å¼ã€‚

ç®€å•æ¥è¯´ï¼ŒMCP å°±åƒæ˜¯ AI åº”ç”¨çš„ **"USB-C æ¥å£"** æˆ– **"ä¸‡èƒ½æ’å¤´"**ã€‚

### MCP è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

åœ¨æ²¡æœ‰ MCP ä¹‹å‰ï¼ŒAI åº”ç”¨æ¥å…¥å¤–éƒ¨å·¥å…·é¢ä¸´ **"MÃ—N é—®é¢˜"**ï¼š

```
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ª AI åº”ç”¨éƒ½è¦å•ç‹¬å¯¹æ¥æ¯ä¸ªå·¥å…·

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude   â”‚     â”‚ ChatGPT  â”‚     â”‚ Gemini   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                â”‚                â”‚
     â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub   â”‚     â”‚ Database â”‚     â”‚ Slack    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼š3 ä¸ª AI Ã— 3 ä¸ªå·¥å…· = 9 å¥—å¯¹æ¥ä»£ç 
```

æœ‰äº† MCP åï¼Œå˜æˆ **"M+N é—®é¢˜"**ï¼š

```
MCP æ–¹å¼ï¼šç»Ÿä¸€åè®®ï¼Œå³æ’å³ç”¨

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude   â”‚     â”‚ ChatGPT  â”‚     â”‚ Gemini   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  MCP åè®®å±‚    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                â”‚                â”‚
     â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub   â”‚     â”‚ Database â”‚     â”‚ Slack    â”‚
â”‚ (MCP)    â”‚     â”‚ (MCP)    â”‚     â”‚ (MCP)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»“æœï¼š3 ä¸ª AI + 3 ä¸ªå·¥å…· = 6 å¥—ä»£ç 
```

### MCP vs Function Callï¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

åœ¨ä»‹ç» MCP ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ **Function Callï¼ˆå‡½æ•°è°ƒç”¨ï¼‰** æ˜¯ä»€ä¹ˆã€‚

#### ä»€ä¹ˆæ˜¯ Function Callï¼Ÿ

Function Call æ˜¯ OpenAI åœ¨ 2023 å¹´æ¨å‡ºçš„ä¸€é¡¹èƒ½åŠ›ï¼Œå…è®¸ AI æ¨¡å‹åœ¨å¯¹è¯è¿‡ç¨‹ä¸­"è°ƒç”¨å‡½æ•°"ã€‚ç®€å•æ¥è¯´ï¼ŒAI å¯ä»¥è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼Œç„¶åå‘Šè¯‰ä½ åº”è¯¥è°ƒç”¨å“ªä¸ªå‡½æ•°ã€ä¼ ä»€ä¹ˆå‚æ•°ã€‚

**Function Call çš„å·¥ä½œæµç¨‹ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ç”¨æˆ·æé—®ï¼š"åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. AI åˆ†ææ„å›¾ï¼Œè¿”å›è¦è°ƒç”¨çš„å‡½æ•°å’Œå‚æ•°                            â”‚
â”‚     { "name": "get_weather", "arguments": { "city": "åŒ—äº¬" } }   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å¼€å‘è€…è‡ªå·±æ‰§è¡Œå‡½æ•°ï¼Œè·å–ç»“æœ                                   â”‚
â”‚     const result = await get_weather("åŒ—äº¬");  // ä½ è‡ªå·±å®ç°      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æŠŠç»“æœå‘å›ç»™ AIï¼ŒAI ç”Ÿæˆæœ€ç»ˆå›å¤                               â”‚
â”‚     "åŒ—äº¬ä»Šå¤©æ™´ï¼Œæ°”æ¸© 25Â°Cï¼Œé€‚åˆå‡ºè¡Œã€‚"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Function Call ä»£ç ç¤ºä¾‹ï¼š**

```javascript
// Function Call æ˜¯ API çº§åˆ«çš„èƒ½åŠ›
const response = await openai.chat.completions.create({
  model: "gpt-4",
  messages: [{ role: "user", content: "åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ" }],
  tools: [{
    type: "function",
    function: {
      name: "get_weather",
      description: "è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
      parameters: {
        type: "object",
        properties: {
          city: { type: "string", description: "åŸå¸‚åç§°" }
        },
        required: ["city"]
      }
    }
  }]
});

// AI è¿”å›è¦è°ƒç”¨çš„å‡½æ•°å’Œå‚æ•°
if (response.choices[0].message.tool_calls) {
  const toolCall = response.choices[0].message.tool_calls[0];
  const args = JSON.parse(toolCall.function.arguments);

  // å¼€å‘è€…è‡ªå·±å®ç°å¹¶æ‰§è¡Œå‡½æ•°
  const weatherResult = await get_weather(args.city);

  // æŠŠç»“æœå‘å›ç»™ AI
  const finalResponse = await openai.chat.completions.create({
    model: "gpt-4",
    messages: [
      { role: "user", content: "åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ" },
      response.choices[0].message,
      { role: "tool", tool_call_id: toolCall.id, content: weatherResult }
    ]
  });
}
```

**Function Call çš„å±€é™æ€§ï¼š**

| é—®é¢˜ | è¯´æ˜ |
|-----|------|
| **å·¥å…·å®šä¹‰é‡å¤** | æ¯æ¬¡ API è¯·æ±‚éƒ½è¦å¸¦ä¸Šå®Œæ•´çš„å·¥å…·å®šä¹‰ |
| **æ‰§è¡Œé€»è¾‘è‡ªå·±å†™** | AI åªå‘Šè¯‰ä½ è°ƒç”¨ä»€ä¹ˆï¼Œå…·ä½“æ‰§è¡Œè¦è‡ªå·±å®ç° |
| **å¹³å°ä¸ç»Ÿä¸€** | OpenAIã€Claudeã€Gemini å„æœ‰å„çš„æ ¼å¼ |
| **æ— æ³•å¤ç”¨** | æ¯ä¸ªé¡¹ç›®éƒ½è¦é‡æ–°å®šä¹‰å’Œå®ç°å·¥å…· |
| **æ— å·¥å…·å‘ç°** | æ²¡æœ‰æ ‡å‡†çš„æ–¹å¼è®© AI å‘ç°å¯ç”¨å·¥å…· |

#### MCP å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Ÿ

MCP æŠŠ Function Call çš„"å®šä¹‰"å’Œ"æ‰§è¡Œ"éƒ½å°è£…åˆ°ç‹¬ç«‹çš„æœåŠ¡ä¸­ï¼š

```javascript
// MCP æ˜¯ç‹¬ç«‹çš„æœåŠ¡å±‚
const server = new FastMCP({ name: 'Weather MCP' });

server.addTool({
  name: 'get_weather',
  description: 'è·å–å¤©æ°”ä¿¡æ¯',
  parameters: z.object({ city: z.string() }),
  execute: async (args) => {
    // å·¥å…·é€»è¾‘åœ¨ Server ç«¯å®ç°ï¼Œä¸éœ€è¦å¼€å‘è€…å†å†™
    return await fetchWeatherFromAPI(args.city);
  }
});

server.start({ transportType: 'stdio' });

// AI åº”ç”¨é€šè¿‡ MCP Client è‡ªåŠ¨å‘ç°å’Œè°ƒç”¨å·¥å…·
// å¼€å‘è€…åªéœ€è¦é…ç½®ä¸€ä¸‹ï¼Œä¸éœ€è¦å†™è°ƒç”¨ä»£ç 
```

#### æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”

| ç‰¹æ€§ | Function Call | MCP |
|-----|--------------|-----|
| **æ¶æ„** | API è¯·æ±‚å‚æ•° | ç‹¬ç«‹æœåŠ¡åè®® |
| **å·¥å…·æ‰§è¡Œ** | å¼€å‘è€…è‡ªå·±å®ç° | MCP Server å®ç° |
| **è·¨å¹³å°** | å„å¹³å°æ ¼å¼ä¸åŒ | ç»Ÿä¸€æ ‡å‡† |
| **å·¥å…·å‘ç°** | æ—  | è‡ªåŠ¨å‘ç° |
| **å¤ç”¨æ€§** | æ¯ä¸ªé¡¹ç›®é‡å†™ | ä¸€æ¬¡å¼€å‘ï¼Œåˆ°å¤„ä½¿ç”¨ |
| **ç”Ÿæ€** | æ—  | ä¸Šä¸‡ä¸ªç°æˆå·¥å…· |

**ä¸€å¥è¯æ€»ç»“ï¼š**

> Function Call æ˜¯"AI å‘Šè¯‰ä½ è¦è°ƒç”¨ä»€ä¹ˆï¼Œä½ è‡ªå·±å»æ‰§è¡Œ"ï¼›MCP æ˜¯"AI ç›´æ¥è°ƒç”¨ç°æˆçš„æœåŠ¡ï¼Œæ‹¿åˆ°ç»“æœ"ã€‚

### MCP æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI åº”ç”¨ï¼ˆHostï¼‰                         â”‚
â”‚                   Cursor / Claude Code                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ MCP åè®® (JSON-RPC 2.0)
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MCP Client                               â”‚
â”‚              ï¼ˆå†…ç½®äº AI åº”ç”¨ä¸­ï¼‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ MCP Server â”‚  â”‚ MCP Server â”‚  â”‚ MCP Server â”‚
   â”‚   å·¥å…· A    â”‚  â”‚   å·¥å…· B    â”‚  â”‚   å·¥å…· C    â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  æ•°æ®åº“   â”‚    â”‚   API    â”‚    â”‚  æ–‡ä»¶ç³»ç»Ÿ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒæ¦‚å¿µï¼š**
- **Hostï¼ˆå®¿ä¸»ï¼‰**ï¼šAI åº”ç”¨ç¨‹åºï¼Œå¦‚ Cursorã€Claude Code
- **Clientï¼ˆå®¢æˆ·ç«¯ï¼‰**ï¼šå†…ç½®äº Host ä¸­ï¼Œè´Ÿè´£ä¸ Server é€šä¿¡
- **Serverï¼ˆæœåŠ¡å™¨ï¼‰**ï¼šæä¾›å…·ä½“å·¥å…·å’Œèµ„æºçš„æœåŠ¡

---

## äºŒã€MCP çš„ç”¨é€”

### 1. æ‰©å±• AI èƒ½åŠ›

é€šè¿‡ MCPï¼ŒAI å¯ä»¥çªç ´çº¯è¯­è¨€æ¨¡å‹çš„é™åˆ¶ï¼Œè·å¾—å®é™…æ“ä½œèƒ½åŠ›ï¼š

- **æ•°æ®æŸ¥è¯¢**ï¼šä»æ•°æ®åº“ã€API è·å–å®æ—¶æ•°æ®
- **æ–‡ä»¶æ“ä½œ**ï¼šè¯»å†™æ–‡ä»¶ã€ç®¡ç†æ–‡æ¡£
- **ç½‘ç»œè¯·æ±‚**ï¼šè°ƒç”¨ REST APIã€è·å–ç½‘é¡µå†…å®¹
- **ç³»ç»Ÿæ“ä½œ**ï¼šæ‰§è¡Œå‘½ä»¤ã€ç®¡ç†è¿›ç¨‹

### 2. æ ‡å‡†åŒ–é›†æˆ

- **ç»Ÿä¸€æ¥å£**ï¼šä¸€æ¬¡å¼€å‘ï¼Œåˆ°å¤„ä½¿ç”¨
- **å³æ’å³ç”¨**ï¼šæ–°å·¥å…·æ— éœ€ä¿®æ”¹ AI åº”ç”¨ä»£ç 
- **é™ä½æˆæœ¬**ï¼šå‡å°‘é‡å¤å¼€å‘å·¥ä½œ

### 3. æé«˜å¼€å‘æ•ˆç‡

- **å¿«é€Ÿæ„å»º**ï¼šä½¿ç”¨ FastMCP æ¡†æ¶ï¼Œå‡ åˆ†é’Ÿå³å¯å¼€å‘ä¸€ä¸ª MCP æœåŠ¡
- **å¤ç”¨ä»£ç **ï¼šç°æœ‰ API å¯è½»æ¾å°è£…ä¸º MCP å·¥å…·
- **æ¨¡å—åŒ–**ï¼šå·¥å…·ã€èµ„æºã€æç¤ºç‹¬ç«‹ç®¡ç†

---

## ä¸‰ã€MCP çš„ä¸‰ç§ä¼ è¾“æ¨¡å¼

MCP æ”¯æŒä¸‰ç§ä¼ è¾“æ¨¡å¼ï¼Œé€‚åº”ä¸åŒåœºæ™¯ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»æ¯ç§æ¨¡å¼çš„åŸç†å’Œæ ¸å¿ƒä»£ç ã€‚

### 1. STDIOï¼ˆæ ‡å‡†è¾“å…¥è¾“å‡ºï¼‰

**æœ€å¸¸ç”¨çš„æœ¬åœ°å¼€å‘æ¨¡å¼ã€‚**

- é€‚åˆï¼šæœ¬åœ°å¼€å‘ã€ä¸ªäººä½¿ç”¨
- ä¼˜ç‚¹ï¼šå®‰å…¨æ€§é«˜ï¼ˆæœ¬åœ°è¿›ç¨‹é€šä¿¡ï¼‰ã€å»¶è¿Ÿä½ã€æ— éœ€ç½‘ç»œ
- ç¼ºç‚¹ï¼šå¿…é¡»åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œ

**é€šä¿¡åŸç†ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Client â”‚ â”€â”€â”€â”€ stdin â”€â”€â”€â”€â”€â–¶ â”‚  MCP Server â”‚
â”‚  (AI åº”ç”¨)   â”‚ â—€â”€â”€â”€ stdout â”€â”€â”€â”€â”€ â”‚  (å­è¿›ç¨‹)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœåŠ¡ç«¯ä»£ç ï¼ˆNode.jsï¼‰ï¼š**

```typescript
import { FastMCP } from 'fastmcp';

const server = new FastMCP({
  name: 'My MCP Server',
  version: '1.0.0',
});

// æ·»åŠ å·¥å…·...

// STDIO æ¨¡å¼å¯åŠ¨
server.start({
  transportType: 'stdio'
});
```

**å®¢æˆ·ç«¯é…ç½®ï¼ˆCursor mcp.jsonï¼‰ï¼š**

```json
{
  "mcpServers": {
    "my-server": {
      "command": "node",
      "args": ["/path/to/server.js"]
    }
  }
}
```

**åº•å±‚åŸç†ï¼š** Client å¯åŠ¨ Server ä½œä¸ºå­è¿›ç¨‹ï¼Œé€šè¿‡ `process.stdin` å’Œ `process.stdout` è¿›è¡Œ JSON-RPC é€šä¿¡ã€‚

---

### 2. SSEï¼ˆServer-Sent Eventsï¼‰

**å•å‘æµå¼ä¼ è¾“ï¼ŒåŸºäº HTTP çš„æœåŠ¡å™¨æ¨é€æŠ€æœ¯ã€‚**

- é€‚åˆï¼šæœåŠ¡å™¨ä¸»åŠ¨æ¨é€ã€å®æ—¶é€šçŸ¥åœºæ™¯
- ç‰¹ç‚¹ï¼šæœåŠ¡å™¨å¯ä»¥æŒç»­æ¨é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯
- ç°çŠ¶ï¼šMCP æ—©æœŸä½¿ç”¨ï¼Œç°é€æ¸è¢« Streamable HTTP æ›¿ä»£

**é€šä¿¡åŸç†ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Client â”‚ â”€â”€â”€â”€ HTTP POST â”€â”€â”€â”€â”€â”€â–¶ â”‚  MCP Server â”‚
â”‚             â”‚ â—€â”€â”€â”€ SSE Stream â”€â”€â”€â”€â”€â”€ â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   (text/event-stream)   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœåŠ¡ç«¯ä»£ç ï¼ˆNode.js åŸç”Ÿå®ç°ï¼‰ï¼š**

```typescript
import express from 'express';

const app = express();

// SSE ç«¯ç‚¹ - æœåŠ¡å™¨æ¨é€æ¶ˆæ¯
app.get('/mcp/sse', (req, res) => {
  // è®¾ç½® SSE å“åº”å¤´
  res.setHeader('Content-Type', 'text/event-stream');
  res.setHeader('Cache-Control', 'no-cache');
  res.setHeader('Connection', 'keep-alive');

  // å‘é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯
  const sendEvent = (data: any) => {
    res.write(`data: ${JSON.stringify(data)}\n\n`);
  };

  // ç¤ºä¾‹ï¼šæ¯ç§’æ¨é€ä¸€æ¬¡
  const interval = setInterval(() => {
    sendEvent({ type: 'heartbeat', timestamp: Date.now() });
  }, 1000);

  // å®¢æˆ·ç«¯æ–­å¼€æ—¶æ¸…ç†
  req.on('close', () => {
    clearInterval(interval);
  });
});

// æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚
app.post('/mcp/message', express.json(), (req, res) => {
  const message = req.body;
  // å¤„ç† JSON-RPC è¯·æ±‚...
  res.json({ jsonrpc: '2.0', id: message.id, result: {...} });
});

app.listen(8000);
```

**å®¢æˆ·ç«¯ä»£ç ï¼ˆæµè§ˆå™¨ EventSourceï¼‰ï¼š**

```typescript
// ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿ EventSource API
const eventSource = new EventSource('http://localhost:8000/mcp/sse');

// ç›‘å¬æœåŠ¡å™¨æ¨é€çš„æ¶ˆæ¯
eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯:', data);
};

// ç›‘å¬è¿æ¥æ‰“å¼€
eventSource.onopen = () => {
  console.log('SSE è¿æ¥å·²å»ºç«‹');
};

// ç›‘å¬é”™è¯¯
eventSource.onerror = (error) => {
  console.error('SSE è¿æ¥é”™è¯¯:', error);
  eventSource.close();
};

// å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ˆSSE æ˜¯å•å‘çš„ï¼Œéœ€è¦ç”¨ fetch å‘é€ï¼‰
async function callTool(toolName: string, args: any) {
  const response = await fetch('http://localhost:8000/mcp/message', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      jsonrpc: '2.0',
      id: Date.now(),
      method: 'tools/call',
      params: { name: toolName, arguments: args }
    })
  });
  return response.json();
}
```

**Node.js å®¢æˆ·ç«¯ä»£ç ï¼ˆeventsource åº“ï¼‰ï¼š**

```typescript
import EventSource from 'eventsource';

// Node.js ç¯å¢ƒéœ€è¦å®‰è£… eventsource åŒ…
const es = new EventSource('http://localhost:8000/mcp/sse');

es.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('æ”¶åˆ°:', data);
};

es.onerror = (err) => {
  console.error('è¿æ¥é”™è¯¯:', err);
};
```

---

### 3. HTTP / Streamable HTTPï¼ˆæ¨èï¼‰

**ç”Ÿäº§ç¯å¢ƒé¦–é€‰æ¨¡å¼ï¼Œæ”¯æŒåŒå‘é€šä¿¡å’Œæµå¼å“åº”ã€‚**

- é€‚åˆï¼šè¿œç¨‹éƒ¨ç½²ã€å›¢é˜Ÿå…±äº«ã€ç”Ÿäº§ç¯å¢ƒ
- ä¼˜ç‚¹ï¼šåŒå‘é€šä¿¡ã€å¯é…ç½® HTTPS åŠ å¯†ã€æ”¯æŒå¤šå®¢æˆ·ç«¯
- ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–çš„æœåŠ¡å™¨éƒ¨ç½²

**é€šä¿¡åŸç†ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Client â”‚ â”€â”€â”€â”€ HTTP POST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  MCP Server â”‚
â”‚             â”‚ â—€â”€â”€â”€ Streaming Response â”€â”€â”€ â”‚  (ç‹¬ç«‹æœåŠ¡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                           â”‚
        â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
        â””â”€â”€â”€â”€ HTTPS â”€â”€â”€â”‚  Nginx  â”‚â”€â”€â”€â”€ HTTP â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœåŠ¡ç«¯ä»£ç ï¼ˆFastMCPï¼‰ï¼š**

```typescript
import { FastMCP } from 'fastmcp';

const server = new FastMCP({
  name: 'My MCP Server',
  version: '1.0.0',
});

// æ·»åŠ å·¥å…·
server.addTool({
  name: 'query_data',
  description: 'æŸ¥è¯¢æ•°æ®',
  parameters: z.object({
    keyword: z.string()
  }),
  execute: async (args) => {
    return JSON.stringify({ result: 'data...' });
  }
});

// HTTP æ¨¡å¼å¯åŠ¨
server.start({
  transportType: 'httpStream',
  httpStream: {
    port: 8000
  }
});

// æœåŠ¡è¿è¡Œåœ¨ http://localhost:8000/mcp
```

**å®¢æˆ·ç«¯ä»£ç ï¼ˆåŸç”Ÿ fetch è°ƒç”¨ï¼‰ï¼š**

```typescript
// HTTP æ¨¡å¼çš„å®¢æˆ·ç«¯è°ƒç”¨
async function callMcpTool(serverUrl: string, toolName: string, args: any) {
  const response = await fetch(`${serverUrl}/mcp`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      jsonrpc: '2.0',
      id: Date.now(),
      method: 'tools/call',
      params: {
        name: toolName,
        arguments: args
      }
    })
  });

  // å¤„ç†æµå¼å“åº”
  const reader = response.body?.getReader();
  const decoder = new TextDecoder();

  while (reader) {
    const { done, value } = await reader.read();
    if (done) break;

    const chunk = decoder.decode(value);
    console.log('æ”¶åˆ°æ•°æ®å—:', chunk);
  }
}

// è°ƒç”¨ç¤ºä¾‹
callMcpTool('http://localhost:8000', 'query_data', { keyword: 'test' });
```

**å®¢æˆ·ç«¯é…ç½®ï¼ˆCursor mcp.json - HTTP æ¨¡å¼ï¼‰ï¼š**

```json
{
  "mcpServers": {
    "remote-server": {
      "url": "https://your-domain.com/mcp"
    }
  }
}
```

---

### ä¸‰ç§æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | STDIO | SSE | HTTP/Streamable |
|-----|-------|-----|-----------------|
| **é€šä¿¡æ–¹å‘** | åŒå‘ | å•å‘ï¼ˆæœåŠ¡å™¨â†’å®¢æˆ·ç«¯ï¼‰ | åŒå‘ |
| **é€‚ç”¨åœºæ™¯** | æœ¬åœ°å¼€å‘ | å®æ—¶æ¨é€ | ç”Ÿäº§ç¯å¢ƒ |
| **éƒ¨ç½²å¤æ‚åº¦** | æœ€ç®€å• | ä¸­ç­‰ | è¾ƒå¤æ‚ |
| **ç½‘ç»œè¦æ±‚** | æ—  | HTTP | HTTP/HTTPS |
| **å¤šå®¢æˆ·ç«¯** | ä¸æ”¯æŒ | æ”¯æŒ | æ”¯æŒ |
| **æ¨èç¨‹åº¦** | å¼€å‘é¦–é€‰ | é€æ¸æ·˜æ±° | ç”Ÿäº§é¦–é€‰ |

**é€‰æ‹©å»ºè®®ï¼š**
- **æœ¬åœ°å¼€å‘è°ƒè¯•**ï¼šä½¿ç”¨ STDIOï¼Œæœ€ç®€å•
- **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**ï¼šä½¿ç”¨ HTTP/Streamable HTTP
- **éœ€è¦å®æ—¶æ¨é€**ï¼šå¯ä»¥è€ƒè™‘ SSEï¼Œä½†å»ºè®®ç›´æ¥ç”¨ HTTP

---

## å››ã€MCP åœ¨ Cursor å’Œ Claude Code ä¸­çš„é…ç½®

### Cursor é…ç½®

**é…ç½®æ–‡ä»¶è·¯å¾„ï¼š**
- macOS: `~/.cursor/mcp.json`
- Windows: `%USERPROFILE%\.cursor\mcp.json`

**STDIO æ¨¡å¼é…ç½®ï¼ˆnpx æ–¹å¼ï¼‰ï¼š**

```json
{
  "mcpServers": {
    "claude-stats": {
      "command": "npx",
      "args": ["claude-stats-mcp"],
      "env": {
        "CONFIG_PATH": "/path/to/keys.json"
      }
    }
  }
}
```

**STDIO æ¨¡å¼é…ç½®ï¼ˆæœ¬åœ°å¼€å‘ï¼‰ï¼š**

```json
{
  "mcpServers": {
    "claude-stats": {
      "command": "npx",
      "args": ["tsx", "/path/to/project/src/index.ts"],
      "env": {
        "CONFIG_PATH": "/path/to/keys.json"
      }
    }
  }
}
```

**HTTP æ¨¡å¼é…ç½®ï¼š**

```json
{
  "mcpServers": {
    "claude-stats": {
      "url": "https://your-domain.com/mcp"
    }
  }
}
```

### Claude Code é…ç½®

**é…ç½®æ–‡ä»¶è·¯å¾„ï¼š**
- macOS/Linux: `~/.claude.json`

**é…ç½®ç¤ºä¾‹ï¼š**

```json
{
  "mcpServers": {
    "claude-stats": {
      "command": "npx",
      "args": ["claude-stats-mcp"]
    }
  }
}
```

---

## äº”ã€MCP åœ¨å·¥ä½œä¸­çš„å®é™…åº”ç”¨

æœ¬ç« é‡ç‚¹ä»‹ç»å‡ ä¸ªåœ¨æ—¥å¸¸å¼€å‘ä¸­éå¸¸å®ç”¨çš„ MCP æœåŠ¡ï¼Œä»¥åŠå®ƒä»¬åœ¨ **Claude Code** ä¸­çš„é…ç½®å’Œä½¿ç”¨æ–¹å¼ã€‚

### 1. Figma MCP - è®¾è®¡ç¨¿è¿˜åŸç¥å™¨

**Figma MCP** å¯ä»¥è®© AI ç›´æ¥è¯»å– Figma è®¾è®¡ç¨¿çš„ç»“æ„ã€æ ·å¼ã€å°ºå¯¸ç­‰ä¿¡æ¯ï¼Œå®ç°ç²¾å‡†çš„è®¾è®¡ç¨¿è¿˜åŸã€‚

#### å®‰è£…ä¸é…ç½®

**Claude Code é…ç½®ï¼ˆ~/.claude.jsonï¼‰ï¼š**

```json
{
  "mcpServers": {
    "figma": {
      "command": "npx",
      "args": ["-y", "figma-developer-mcp", "--stdio"],
      "env": {
        "FIGMA_API_KEY": "ä½ çš„ Figma API Key"
      }
    }
  }
}
```

**è·å– Figma API Keyï¼š**
1. ç™»å½• Figma è´¦å·
2. è¿›å…¥ Settings â†’ Account â†’ Personal access tokens
3. ç‚¹å‡» "Create new token" ç”Ÿæˆ API Key

#### ä½¿ç”¨æ–¹å¼

å½“ä½ éœ€è¦è¿˜åŸè®¾è®¡ç¨¿æ—¶ï¼Œåªéœ€è¦æŠŠ Figma é“¾æ¥å‘ç»™ Claude Codeï¼š

```
ç”¨æˆ·ï¼šè¯·æ ¹æ®è¿™ä¸ªè®¾è®¡ç¨¿å®ç°é¡µé¢
https://www.figma.com/design/xxxxx/ProjectName?node-id=123-456

Claude Code ä¼šï¼š
1. è°ƒç”¨ get_design_context è·å–è®¾è®¡ç¨¿ç»“æ„å’Œæ ·å¼
2. è°ƒç”¨ get_screenshot è·å–è®¾è®¡ç¨¿æˆªå›¾å¯¹ç…§
3. æ ¹æ®è·å–çš„ä¿¡æ¯ç”Ÿæˆä»£ç 
```

#### æ ¸å¿ƒå·¥å…·è¯´æ˜

| å·¥å…·å | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|-------|------|---------|
| `get_design_context` | è·å–èŠ‚ç‚¹çš„è®¾è®¡ä¿¡æ¯å’Œä»£ç å»ºè®® | ä¸»è¦å·¥å…·ï¼Œè·å–å®Œæ•´è®¾è®¡æ•°æ® |
| `get_screenshot` | è·å–è®¾è®¡ç¨¿æˆªå›¾ | å¯¹ç…§æ£€æŸ¥è¿˜åŸæ•ˆæœ |
| `get_metadata` | è·å–èŠ‚ç‚¹ç»“æ„ï¼ˆXML æ ¼å¼ï¼‰ | äº†è§£é¡µé¢å±‚çº§ç»“æ„ |
| `get_variable_defs` | è·å–è®¾è®¡å˜é‡å®šä¹‰ | è·å–é¢œè‰²ã€å­—ä½“ç­‰å˜é‡ |
| `get_code_connect_map` | è·å– Code Connect æ˜ å°„ | å…³è”è®¾è®¡ä¸ä»£ç ç»„ä»¶ |

#### å®é™…æ¡ˆä¾‹

```
ç”¨æˆ·ï¼šå¸®æˆ‘æŠŠè¿™ä¸ª Figma è®¾è®¡ç¨¿è¿˜åŸæˆå¾®ä¿¡å°ç¨‹åºé¡µé¢
https://www.figma.com/design/abc123/MiniApp?node-id=1-100

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è§£æ URLï¼Œæå– fileKey=abc123, nodeId=1:100
2. è°ƒç”¨ mcp__figma__get_design_context è·å–è®¾è®¡æ•°æ®
3. è·å–æ‰€æœ‰å­èŠ‚ç‚¹çš„æ ·å¼ã€å°ºå¯¸ã€é¢œè‰²
4. æŒ‰ç…§å°ç¨‹åºè§„èŒƒç”Ÿæˆ WXML + WXSS ä»£ç 
5. å›¾ç‰‡ä½¿ç”¨å ä½ç¬¦ï¼Œå°ºå¯¸æŒ‰è®¾è®¡ç¨¿ px çš„ä¸¤å€è½¬æ¢ä¸º rpx
```

**æ³¨æ„äº‹é¡¹ï¼š**
- ç¡®ä¿ä½ æœ‰è®¾è®¡ç¨¿çš„è®¿é—®æƒé™
- å¤æ‚è®¾è®¡ç¨¿å¯èƒ½éœ€è¦åˆ†èŠ‚ç‚¹è·å–
- å›¾ç‰‡èµ„æºéœ€è¦å•ç‹¬å¯¼å‡ºå¤„ç†

---

### 2. Context7 MCP - å®æ—¶æ–‡æ¡£æŸ¥è¯¢

**Context7 MCP** è§£å†³äº† AI çŸ¥è¯†æˆªæ­¢æ—¥æœŸçš„é—®é¢˜ï¼Œå¯ä»¥å®æ—¶è·å–å„ç§åº“å’Œæ¡†æ¶çš„æœ€æ–°æ–‡æ¡£ã€‚

#### å®‰è£…ä¸é…ç½®

**Claude Code é…ç½®ï¼ˆ~/.claude.jsonï¼‰ï¼š**

```json
{
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@context7/mcp"]
    }
  }
}
```

æ— éœ€ API Keyï¼Œå¼€ç®±å³ç”¨ã€‚

#### ä½¿ç”¨æ–¹å¼

å½“ä½ éœ€è¦æŸ¥è¯¢æœ€æ–°çš„åº“æ–‡æ¡£æ—¶ï¼š

```
ç”¨æˆ·ï¼šNext.js 15 çš„ App Router æ€ä¹ˆé…ç½®åŠ¨æ€è·¯ç”±ï¼Ÿ

Claude Code ä¼šï¼š
1. è°ƒç”¨ resolve-library-id æŸ¥æ‰¾ Next.js å¯¹åº”çš„åº“ ID
2. è°ƒç”¨ get-library-docs è·å–æœ€æ–°æ–‡æ¡£
3. åŸºäºæœ€æ–°æ–‡æ¡£å›ç­”é—®é¢˜
```

#### æ ¸å¿ƒå·¥å…·è¯´æ˜

| å·¥å…·å | åŠŸèƒ½ | å‚æ•° |
|-------|------|------|
| `resolve-library-id` | å°†åº“åè§£æä¸º Context7 ID | `libraryName`: åº“åç§° |
| `get-library-docs` | è·å–åº“çš„æ–‡æ¡£å†…å®¹ | `context7CompatibleLibraryID`: åº“ ID<br>`topic`: æŸ¥è¯¢ä¸»é¢˜<br>`mode`: code/info |

#### å®é™…æ¡ˆä¾‹

```
ç”¨æˆ·ï¼šTailwind CSS 4.0 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Ÿæ€ä¹ˆå‡çº§ï¼Ÿ

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è°ƒç”¨ resolve-library-id("tailwindcss") â†’ è¿”å› "/tailwindlabs/tailwindcss"
2. è°ƒç”¨ get-library-docs({
     context7CompatibleLibraryID: "/tailwindlabs/tailwindcss",
     topic: "upgrade v4",
     mode: "info"
   })
3. è·å–æœ€æ–°çš„ v4 å‡çº§æŒ‡å—
4. åŸºäºæœ€æ–°æ–‡æ¡£ç»™å‡ºå‡çº§å»ºè®®
```

#### æ”¯æŒçš„åº“ç¤ºä¾‹

Context7 è¦†ç›–äº†ä¸»æµçš„å¼€å‘åº“ï¼š

- **å‰ç«¯æ¡†æ¶**ï¼šReact, Vue, Next.js, Nuxt, Svelte
- **CSS æ¡†æ¶**ï¼šTailwind CSS, Ant Design, Element Plus
- **åç«¯æ¡†æ¶**ï¼šExpress, Fastify, NestJS
- **æ•°æ®åº“**ï¼šPrisma, Drizzle, MongoDB, Supabase
- **å·¥å…·åº“**ï¼šZod, Axios, Lodash ç­‰

**ä½¿ç”¨æŠ€å·§ï¼š**
- `mode: "code"` è·å– API å‚è€ƒå’Œä»£ç ç¤ºä¾‹
- `mode: "info"` è·å–æ¦‚å¿µæŒ‡å—å’Œæ¶æ„è¯´æ˜
- `topic` å‚æ•°å¯ä»¥ç²¾ç¡®å®šä½åˆ°ç‰¹å®šåŠŸèƒ½

---

### 3. Playwright MCP - Chrome æµè§ˆå™¨è‡ªåŠ¨åŒ–

**Playwright MCP** è®© AI èƒ½å¤Ÿç›´æ¥æ§åˆ¶ Chrome æµè§ˆå™¨ï¼Œå®ç°é¡µé¢å¯¼èˆªã€å…ƒç´ äº¤äº’ã€æˆªå›¾ã€è¡¨å•å¡«å†™ç­‰è‡ªåŠ¨åŒ–æ“ä½œã€‚éå¸¸é€‚åˆå‰ç«¯å¼€å‘è°ƒè¯•ã€E2E æµ‹è¯•å’Œç½‘é¡µæ•°æ®æŠ“å–ã€‚

#### å®‰è£…ä¸é…ç½®

**Claude Code é…ç½®ï¼ˆ~/.claude.jsonï¼‰ï¼š**

```json
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-playwright"]
    }
  }
}
```

æ— éœ€é¢å¤–å®‰è£…ï¼Œnpx ä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–ã€‚é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨å®‰è£… Chromium æµè§ˆå™¨ã€‚

#### ä½¿ç”¨æ–¹å¼

å½“ä½ éœ€è¦æ“ä½œæµè§ˆå™¨æ—¶ï¼š

```
ç”¨æˆ·ï¼šå¸®æˆ‘æ‰“å¼€ç™¾åº¦é¦–é¡µï¼Œæœç´¢"MCP åè®®"ï¼Œç„¶åæˆªå›¾

Claude Code ä¼šï¼š
1. è°ƒç”¨ playwright_navigate æ‰“å¼€ https://www.baidu.com
2. è°ƒç”¨ playwright_fill å¡«å†™æœç´¢æ¡†
3. è°ƒç”¨ playwright_click ç‚¹å‡»æœç´¢æŒ‰é’®
4. è°ƒç”¨ playwright_screenshot æˆªå–ç»“æœé¡µé¢
```

#### æ ¸å¿ƒå·¥å…·è¯´æ˜

| å·¥å…·å | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|-------|------|---------|
| `playwright_navigate` | å¯¼èˆªåˆ°æŒ‡å®š URL | æ‰“å¼€ç½‘é¡µ |
| `playwright_screenshot` | æˆªå–é¡µé¢æˆªå›¾ | æŸ¥çœ‹é¡µé¢çŠ¶æ€ã€å¯¹æ¯”æ•ˆæœ |
| `playwright_click` | ç‚¹å‡»å…ƒç´  | æŒ‰é’®ç‚¹å‡»ã€é“¾æ¥è·³è½¬ |
| `playwright_fill` | å¡«å†™è¾“å…¥æ¡† | è¡¨å•å¡«å†™ã€æœç´¢è¾“å…¥ |
| `playwright_hover` | é¼ æ ‡æ‚¬åœ | è§¦å‘æ‚¬åœæ•ˆæœ |
| `playwright_select` | ä¸‹æ‹‰æ¡†é€‰æ‹© | é€‰æ‹©é€‰é¡¹ |
| `playwright_evaluate` | æ‰§è¡Œ JavaScript | è·å–é¡µé¢æ•°æ®ã€è°ƒè¯• |
| `playwright_get_visible_text` | è·å–é¡µé¢æ–‡æœ¬ | æå–é¡µé¢å†…å®¹ |
| `playwright_get_visible_html` | è·å–é¡µé¢ HTML | åˆ†æé¡µé¢ç»“æ„ |
| `playwright_console_logs` | è·å–æ§åˆ¶å°æ—¥å¿— | è°ƒè¯• JS é”™è¯¯ |
| `playwright_press_key` | æŒ‰é”®æ“ä½œ | Enter ç¡®è®¤ã€å¿«æ·é”® |
| `playwright_close` | å…³é—­æµè§ˆå™¨ | é‡Šæ”¾èµ„æº |

#### å®é™…æ¡ˆä¾‹

**æ¡ˆä¾‹ 1ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ç™»å½•æµç¨‹**

```
ç”¨æˆ·ï¼šå¸®æˆ‘æµ‹è¯•ä¸€ä¸‹ç™»å½•é¡µé¢æ˜¯å¦æ­£å¸¸å·¥ä½œ

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è°ƒç”¨ playwright_navigate({ url: "http://localhost:3000/login" })
   â†’ æ‰“å¼€ç™»å½•é¡µé¢
2. è°ƒç”¨ playwright_fill({ selector: "#username", value: "testuser" })
   â†’ å¡«å†™ç”¨æˆ·å
3. è°ƒç”¨ playwright_fill({ selector: "#password", value: "123456" })
   â†’ å¡«å†™å¯†ç 
4. è°ƒç”¨ playwright_click({ selector: "button[type=submit]" })
   â†’ ç‚¹å‡»ç™»å½•æŒ‰é’®
5. è°ƒç”¨ playwright_screenshot({ name: "login-result" })
   â†’ æˆªå›¾æŸ¥çœ‹ç»“æœ
6. è°ƒç”¨ playwright_get_visible_text()
   â†’ æ£€æŸ¥æ˜¯å¦ç™»å½•æˆåŠŸ
```

**æ¡ˆä¾‹ 2ï¼šæŠ“å–ç½‘é¡µæ•°æ®**

```
ç”¨æˆ·ï¼šå¸®æˆ‘è·å–è¿™ä¸ªé¡µé¢çš„å•†å“åˆ—è¡¨ä¿¡æ¯
https://example.com/products

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è°ƒç”¨ playwright_navigate({ url: "https://example.com/products" })
   â†’ æ‰“å¼€å•†å“é¡µé¢
2. è°ƒç”¨ playwright_evaluate({
     script: "Array.from(document.querySelectorAll('.product')).map(el => ({
       name: el.querySelector('.name').textContent,
       price: el.querySelector('.price').textContent
     }))"
   })
   â†’ æ‰§è¡Œ JS æå–å•†å“æ•°æ®
3. è¿”å›ç»“æ„åŒ–çš„å•†å“åˆ—è¡¨
```

**æ¡ˆä¾‹ 3ï¼šé¡µé¢ UI éªŒè¯**

```
ç”¨æˆ·ï¼šå¸®æˆ‘æ£€æŸ¥é¦–é¡µåœ¨ä¸åŒè®¾å¤‡ä¸Šçš„æ˜¾ç¤ºæ•ˆæœ

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è°ƒç”¨ playwright_navigate({ url: "http://localhost:3000", width: 1920, height: 1080 })
   â†’ æ¡Œé¢ç«¯è®¿é—®
2. è°ƒç”¨ playwright_screenshot({ name: "desktop-view", fullPage: true })
   â†’ æˆªå–æ¡Œé¢ç«¯å…¨é¡µé¢
3. è°ƒç”¨ playwright_resize({ device: "iPhone 13" })
   â†’ åˆ‡æ¢åˆ° iPhone 13 è§†å£
4. è°ƒç”¨ playwright_screenshot({ name: "mobile-view", fullPage: true })
   â†’ æˆªå–ç§»åŠ¨ç«¯å…¨é¡µé¢
5. å¯¹æ¯”ä¸¤å¼ æˆªå›¾ï¼Œåˆ†æå“åº”å¼å¸ƒå±€é—®é¢˜
```

**æ¡ˆä¾‹ 4ï¼šè°ƒè¯• JavaScript é”™è¯¯**

```
ç”¨æˆ·ï¼šé¡µé¢æœ‰ JS æŠ¥é”™ï¼Œå¸®æˆ‘æ’æŸ¥ä¸€ä¸‹

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è°ƒç”¨ playwright_navigate({ url: "http://localhost:3000" })
   â†’ æ‰“å¼€é¡µé¢
2. è°ƒç”¨ playwright_console_logs({ type: "error" })
   â†’ è·å–æ§åˆ¶å°é”™è¯¯æ—¥å¿—
3. åˆ†æé”™è¯¯å †æ ˆï¼Œå®šä½é—®é¢˜ä»£ç 
4. ç»™å‡ºä¿®å¤å»ºè®®
```

**é«˜çº§ç”¨æ³•ï¼šAPI è¯·æ±‚æµ‹è¯•**

Playwright MCP è¿˜æ”¯æŒç›´æ¥å‘é€ HTTP è¯·æ±‚ï¼š

```
ç”¨æˆ·ï¼šå¸®æˆ‘æµ‹è¯•ä¸€ä¸‹è¿™ä¸ª API æ¥å£

Claude Code æ‰§è¡Œæµç¨‹ï¼š
1. è°ƒç”¨ playwright_post({
     url: "http://localhost:8080/api/users",
     value: '{"name": "test", "email": "test@example.com"}',
     headers: { "Content-Type": "application/json" }
   })
   â†’ å‘é€ POST è¯·æ±‚
2. åˆ†æè¿”å›ç»“æœï¼ŒéªŒè¯æ¥å£è¡Œä¸º
```

---

### 4. å¤šä¸ª MCP ååŒä½¿ç”¨

åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¤šä¸ª MCP å¯ä»¥ååŒå·¥ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚

#### å®Œæ•´çš„ Claude Code é…ç½®ç¤ºä¾‹

```json
{
  "mcpServers": {
    "figma": {
      "command": "npx",
      "args": ["-y", "figma-developer-mcp", "--stdio"],
      "env": {
        "FIGMA_API_KEY": "your-figma-api-key"
      }
    },
    "context7": {
      "command": "npx",
      "args": ["-y", "@context7/mcp"]
    },
    "playwright": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-playwright"]
    },
    "claude-stats": {
      "command": "npx",
      "args": ["claude-stats-mcp"]
    }
  }
}
```

#### ååŒå·¥ä½œåœºæ™¯

**åœºæ™¯ï¼šä»è®¾è®¡ç¨¿åˆ°é¡µé¢ä¸Šçº¿**

```
1. ã€Figma MCPã€‘è·å–è®¾è®¡ç¨¿ï¼Œç”Ÿæˆé¡µé¢ä»£ç 
   â†’ "è¯·æ ¹æ®è¿™ä¸ª Figma é“¾æ¥å®ç°é¡µé¢"

2. ã€Context7 MCPã€‘æŸ¥è¯¢æœ€æ–°çš„ç»„ä»¶åº“ç”¨æ³•
   â†’ "Ant Design 5.x çš„ Table ç»„ä»¶æ€ä¹ˆå®ç°è™šæ‹Ÿæ»šåŠ¨ï¼Ÿ"

3. ã€Playwright MCPã€‘æ‰“å¼€é¡µé¢æ£€æŸ¥æ•ˆæœ
   â†’ "å¸®æˆ‘æ‰“å¼€ localhost:3000 çœ‹çœ‹é¡µé¢æ•ˆæœï¼Œæˆªä¸ªå›¾"

4. ã€Playwright MCPã€‘è‡ªåŠ¨åŒ–æµ‹è¯•
   â†’ "å¸®æˆ‘æµ‹è¯•ä¸€ä¸‹ç™»å½•æµç¨‹æ˜¯å¦æ­£å¸¸"
```

---

### 5. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### Q1: MCP æœåŠ¡å¯åŠ¨å¤±è´¥

**æ£€æŸ¥æ­¥éª¤ï¼š**
```bash
# 1. ç¡®è®¤ Node.js ç‰ˆæœ¬ >= 18
node -v

# 2. æ‰‹åŠ¨æµ‹è¯• MCP æ˜¯å¦èƒ½å¯åŠ¨
npx -y @context7/mcp

# 3. æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼
cat ~/.claude.json | jq .
```

#### Q2: Figma MCP è·å–è®¾è®¡ç¨¿å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- API Key æ— æ•ˆæˆ–è¿‡æœŸ
- æ²¡æœ‰è®¾è®¡ç¨¿è®¿é—®æƒé™
- URL æ ¼å¼ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ
curl -H "X-Figma-Token: YOUR_API_KEY" \
  "https://api.figma.com/v1/me"
```

#### Q3: Playwright MCP æµè§ˆå™¨å¯åŠ¨å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- Chromium æœªå®‰è£…æˆ–å®‰è£…å¤±è´¥
- ç³»ç»Ÿç¼ºå°‘ä¾èµ–åº“

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ‰‹åŠ¨å®‰è£… Playwright æµè§ˆå™¨
npx playwright install chromium

# å¦‚æœæ˜¯ Linux ç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦å®‰è£…ä¾èµ–
npx playwright install-deps
```

**å¸¸è§é”™è¯¯å¤„ç†ï¼š**
- å¦‚æœæç¤ºæƒé™é—®é¢˜ï¼Œå°è¯•ä½¿ç”¨ `sudo`
- å¦‚æœåœ¨ CI ç¯å¢ƒï¼Œä½¿ç”¨ `headless: true` æ¨¡å¼

#### Q4: Context7 è¿”å›ç©ºç»“æœ

**å¯èƒ½åŸå› ï¼š**
- åº“åæ‹¼å†™é”™è¯¯
- è¯¥åº“æš‚æœªæ”¶å½•

**è§£å†³æ–¹æ³•ï¼š**
```
å…ˆä½¿ç”¨ resolve-library-id ç¡®è®¤åº“æ˜¯å¦å­˜åœ¨ï¼š
"å¸®æˆ‘æŸ¥ä¸€ä¸‹ Context7 æ˜¯å¦æ”¶å½•äº† xxx åº“"
```

---

## å…­ã€å®æˆ˜ï¼šå¼€å‘ä¸€ä¸ªæœ€ç®€æ˜“çš„ MCP

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨ **Node.js + FastMCP** å¼€å‘ä¸€ä¸ªå®Œæ•´çš„ MCP æœåŠ¡ã€‚

### ä»€ä¹ˆæ˜¯ FastMCP

**FastMCP** æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘ MCP æœåŠ¡å™¨çš„æ¡†æ¶ï¼Œæ”¯æŒ TypeScript å’Œ Python ä¸¤ç§è¯­è¨€ã€‚ç›¸æ¯”å®˜æ–¹ SDKï¼Œå®ƒçš„ API æ›´ç®€æ´ï¼Œå­¦ä¹ æ›²çº¿æ›´å¹³ç¼“ã€‚

**å®‰è£…ä¾èµ–ï¼š**

```bash
npm install fastmcp zod
```

### æ ¸å¿ƒä»£ç 

**1. åˆå§‹åŒ–æœåŠ¡å™¨**

```typescript
#!/usr/bin/env node

import { FastMCP } from 'fastmcp';

// åˆ›å»º MCP æœåŠ¡å™¨å®ä¾‹
const server = new FastMCP({
  name: 'My MCP Server',
  version: '1.0.0',
});
```

è¿™å°±æ˜¯åˆ›å»ºä¸€ä¸ª MCP æœåŠ¡å™¨æ‰€éœ€çš„å…¨éƒ¨ä»£ç ã€‚`name` å’Œ `version` ä¼šåœ¨å®¢æˆ·ç«¯è¿æ¥æ—¶å±•ç¤ºã€‚

**2. æ·»åŠ å·¥å…·ï¼ˆToolï¼‰**

å·¥å…·æ˜¯ MCP çš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº† AI å¯ä»¥è°ƒç”¨çš„å…·ä½“åŠŸèƒ½ï¼š

```typescript
import { z } from 'zod';

server.addTool({
  name: 'query_user',           // å·¥å…·åç§°
  description: 'æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯',   // å·¥å…·æè¿°ï¼ˆAI æ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­ä½•æ—¶è°ƒç”¨ï¼‰
  parameters: z.object({        // å‚æ•°å®šä¹‰ï¼ˆä½¿ç”¨ Zod è¿›è¡Œç±»å‹éªŒè¯ï¼‰
    userId: z.string().describe('ç”¨æˆ·ID'),
    includeDetails: z.boolean().default(false).describe('æ˜¯å¦åŒ…å«è¯¦æƒ…')
  }),
  execute: async (args) => {    // æ‰§è¡Œå‡½æ•°
    // è¿™é‡Œå†™ä¸šåŠ¡é€»è¾‘
    const user = await fetchUser(args.userId);
    return JSON.stringify(user, null, 2);
  }
});
```

**å…³é”®ç‚¹ï¼š**
- `description` éå¸¸é‡è¦ï¼ŒAI ä¼šæ ¹æ®å®ƒæ¥åˆ¤æ–­ä½•æ—¶è°ƒç”¨è¿™ä¸ªå·¥å…·
- `parameters` ä½¿ç”¨ Zod è¿›è¡Œå‚æ•°éªŒè¯ï¼Œç¡®ä¿ç±»å‹å®‰å…¨
- `execute` å‡½æ•°è¿”å›å­—ç¬¦ä¸²ï¼Œé€šå¸¸æ˜¯ JSON æ ¼å¼

**3. å¯åŠ¨æœåŠ¡å™¨**

```typescript
// STDIO æ¨¡å¼ï¼ˆæœ¬åœ°å¼€å‘ï¼‰
server.start({
  transportType: 'stdio'
});

// æˆ– HTTP æ¨¡å¼ï¼ˆè¿œç¨‹éƒ¨ç½²ï¼‰
server.start({
  transportType: 'httpStream',
  httpStream: {
    port: 8000
  }
});
```

### å®Œæ•´ç¤ºä¾‹

```typescript
#!/usr/bin/env node

import { FastMCP } from 'fastmcp';
import { z } from 'zod';

const server = new FastMCP({
  name: 'Claude Stats MCP',
  version: '1.0.0',
});

// å·¥å…·1ï¼šæŸ¥è¯¢ä»Šæ—¥ç»Ÿè®¡
server.addTool({
  name: 'query_today_stats',
  description: 'æŸ¥è¯¢ä»Šæ—¥æ‰€æœ‰è´¦å·çš„ä½¿ç”¨ç»Ÿè®¡ï¼ŒåŒ…æ‹¬è´¹ç”¨ã€è¯·æ±‚æ•°ç­‰',
  parameters: z.object({
    forceRefresh: z.boolean().optional().describe('æ˜¯å¦å¼ºåˆ¶åˆ·æ–°ç¼“å­˜')
  }),
  execute: async (args) => {
    const stats = await getDailyStats(args.forceRefresh);
    return JSON.stringify(stats, null, 2);
  }
});

// å·¥å…·2ï¼šæŸ¥è¯¢ç‰¹å®šç”¨æˆ·
server.addTool({
  name: 'query_user_stats',
  description: 'æŸ¥è¯¢ç‰¹å®šç”¨æˆ·çš„ç»Ÿè®¡æ•°æ®',
  parameters: z.object({
    userName: z.string().describe('ç”¨æˆ·åç§°'),
    period: z.enum(['daily', 'monthly']).default('daily').describe('ç»Ÿè®¡å‘¨æœŸ')
  }),
  execute: async (args) => {
    const user = await findUser(args.userName, args.period);
    return JSON.stringify(user, null, 2);
  }
});

// å¯åŠ¨æœåŠ¡å™¨
server.start({ transportType: 'stdio' });
```

### æ•°æ®æµç¨‹å›¾

å½“ç”¨æˆ·å‘ AI æé—®æ—¶ï¼Œæ•´ä¸ªè°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æé—®ï¼š"ä»Šå¤©ä½¿ç”¨ç‡æœ€é«˜çš„æ˜¯è°ï¼Ÿ"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI åˆ†ææ„å›¾ï¼Œå†³å®šè°ƒç”¨ query_top_users å·¥å…·                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Client å‘é€è¯·æ±‚åˆ° MCP Server                                â”‚
â”‚  { "method": "tools/call", "params": { "name": "query_top_users" }}
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Server æ‰§è¡Œ execute å‡½æ•°                                    â”‚
â”‚  â†’ è°ƒç”¨ API è·å–æ•°æ®                                             â”‚
â”‚  â†’ å¤„ç†æ•°æ®                                                      â”‚
â”‚  â†’ è¿”å› JSON ç»“æœ                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI å°† JSON ç»“æœè½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€å›å¤ç”¨æˆ·                            â”‚
â”‚  "ä»Šå¤©ä½¿ç”¨ç‡æœ€é«˜çš„æ˜¯å¼ ä¸‰ï¼Œè´¹ç”¨ $12.50ï¼Œè¯·æ±‚æ•° 350 æ¬¡"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ Agent äº¤äº’

MCP å·¥å…·çš„ `description` å­—æ®µæ˜¯ä¸ AI Agent äº¤äº’çš„å…³é”®ï¼š

```typescript
// å¥½çš„æè¿° - AI èƒ½å‡†ç¡®ç†è§£ä½•æ—¶è°ƒç”¨
server.addTool({
  name: 'search_user',
  description: 'åœ¨æ•°æ®åº“ä¸­æœç´¢ç”¨æˆ·ä¿¡æ¯ã€‚æ”¯æŒæŒ‰å§“åã€é‚®ç®±ã€IDæœç´¢ã€‚è¿”å›åŒ¹é…çš„ç”¨æˆ·åˆ—è¡¨ã€‚',
  // ...
});

// ä¸å¥½çš„æè¿° - AI å¯èƒ½ä¼šè¯¯åˆ¤
server.addTool({
  name: 'search',
  description: 'æœç´¢',  // å¤ªæ¨¡ç³Šï¼ŒAI ä¸çŸ¥é“æœç´¢ä»€ä¹ˆ
  // ...
});
```

---

## ä¸ƒã€NPX å‘å¸ƒæµç¨‹

å¼€å‘å®Œæˆåï¼Œå¯ä»¥å‘å¸ƒåˆ° npmï¼Œè®©å…¶ä»–ç”¨æˆ·é€šè¿‡ `npx` ç›´æ¥ä½¿ç”¨ã€‚

### 1. é…ç½® package.json

```json
{
  "name": "claude-stats-mcp",
  "version": "1.0.0",
  "description": "MCP æœåŠ¡å™¨ç”¨äºæŸ¥è¯¢ Claude Code ä½¿ç”¨ç»Ÿè®¡",
  "type": "module",
  "main": "dist/index.js",
  "bin": {
    "claude-stats-mcp": "./dist/index.js"
  },
  "files": [
    "dist",
    "README.md"
  ],
  "scripts": {
    "build": "tsc",
    "prepublishOnly": "npm run build"
  }
}
```

**å…³é”®é…ç½®ï¼š**
- `bin`ï¼šå®šä¹‰å‘½ä»¤è¡Œå·¥å…·åç§°
- `files`ï¼šæŒ‡å®šå‘å¸ƒæ—¶åŒ…å«çš„æ–‡ä»¶
- `prepublishOnly`ï¼šå‘å¸ƒå‰è‡ªåŠ¨æ„å»º

### 2. æ·»åŠ  Shebang

ç¡®ä¿å…¥å£æ–‡ä»¶ç¬¬ä¸€è¡Œæœ‰ shebangï¼š

```typescript
#!/usr/bin/env node

import { FastMCP } from 'fastmcp';
// ...
```

### 3. å‘å¸ƒåˆ° npm

```bash
# ç™»å½• npm
npm login

# æ„å»ºé¡¹ç›®
npm run build

# å‘å¸ƒ
npm publish
```

### 4. ç”¨æˆ·ä½¿ç”¨

å‘å¸ƒåï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```bash
# æ— éœ€å®‰è£…ï¼Œç›´æ¥è¿è¡Œ
npx claude-stats-mcp

# æˆ–å…¨å±€å®‰è£…
npm install -g claude-stats-mcp
claude-stats-mcp
```

---

## å…«ã€å…¶ä»–éƒ¨ç½²æ–¹å¼ç®€ä»‹

### HTTPS è¿œç¨‹éƒ¨ç½²

å¦‚æœéœ€è¦è¿œç¨‹è®¿é—®ï¼ˆå¤šäººåä½œã€ç”Ÿäº§ç¯å¢ƒï¼‰ï¼ŒMCP ä¹Ÿæ”¯æŒ HTTP/HTTPS æ¨¡å¼éƒ¨ç½²ï¼š

```bash
# å¯åŠ¨ HTTP æ¨¡å¼
MCP_TRANSPORT=http MCP_PORT=8000 npm start
```

ç„¶åé€šè¿‡ Nginx + SSL è¯ä¹¦ï¼ˆå¦‚ Let's Encryptï¼‰é…ç½® HTTPS è®¿é—®ã€‚

**æ³¨æ„**ï¼šHTTPS éƒ¨ç½²æ¶‰åŠæœåŠ¡å™¨é…ç½®ã€åŸŸåã€SSL è¯ä¹¦ç­‰ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜ã€‚å¯¹äºå¤§å¤šæ•°ä¸ªäººä½¿ç”¨åœºæ™¯ï¼Œ**æ¨èä½¿ç”¨ npx æ–¹å¼**ï¼Œé…ç½®ç®€å•ã€å³å¼€å³ç”¨ã€‚

---

## ä¹ã€MCP å…¶ä»–åº”ç”¨åœºæ™¯

MCP çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å…¸å‹ä¾‹å­ï¼š

- **æ•°æ®åº“æŸ¥è¯¢**ï¼šè®© AI ç›´æ¥æŸ¥è¯¢ MySQLã€PostgreSQLã€MongoDB
- **æ–‡ä»¶ç³»ç»Ÿæ“ä½œ**ï¼šè¯»å†™æœ¬åœ°æ–‡ä»¶ã€ç®¡ç†æ–‡æ¡£
- **ç¬¬ä¸‰æ–¹ API é›†æˆ**ï¼šGitHubã€Jiraã€Notionã€é£ä¹¦
- **è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼šCI/CD è§¦å‘ã€å®šæ—¶ä»»åŠ¡ç®¡ç†
- **ä»£ç åˆ†æ**ï¼šé™æ€åˆ†æã€ä¾èµ–æ£€æŸ¥ã€å®‰å…¨æ‰«æ
- **ç›‘æ§å‘Šè­¦**ï¼šæœåŠ¡å™¨çŠ¶æ€ã€æ—¥å¿—åˆ†æã€å¼‚å¸¸æ£€æµ‹

ç¤¾åŒºå·²ç»å¼€å‘äº†è¶…è¿‡ **ä¸€ä¸‡ç§** MCP Serverï¼Œè¦†ç›–å„ç§åœºæ™¯ã€‚

---

## åã€MCP å‘å±•å½¢åŠ¿ä¸æ€»ç»“

### è¡Œä¸šé‡‡çº³

MCP æ­£åœ¨å¿«é€Ÿæˆä¸º AI å·¥å…·é›†æˆçš„è¡Œä¸šæ ‡å‡†ï¼š

- **2024å¹´11æœˆ**ï¼šAnthropic å‘å¸ƒ MCP åè®®
- **2025å¹´3æœˆ**ï¼šOpenAI æ­£å¼é‡‡çº³ MCPï¼Œé›†æˆåˆ° ChatGPT æ¡Œé¢ç‰ˆå’Œ Agents SDK
- **2025å¹´4æœˆ**ï¼šGoogle DeepMind CEO ç¡®è®¤ Gemini å°†æ”¯æŒ MCP
- **2025å¹´6æœˆ**ï¼šMCP è§„èŒƒæ›´æ–°ï¼Œå®Œå–„æˆæƒæœºåˆ¶ï¼ˆAuth0 å‚ä¸ï¼‰

### ç¤¾åŒºçƒ­åº¦

ä»Šå¹´ä»¥æ¥ï¼ŒAI å¼€å‘ç¤¾åŒºæ€èµ·äº†ä¸€åœº **"MCP æ·˜é‡‘çƒ­"**ï¼š

- çŸ­çŸ­ä¸‰ä¸ªæœˆå†…ï¼Œæ•°åƒä¸ªå·¥å…·æ¥å…¥ MCP åè®®
- MCP Server æ•°é‡è¶…è¿‡ä¸€ä¸‡ç§
- è¢«ç§°ä¸º AI åŸºç¡€è®¾æ–½é¢†åŸŸçš„"ç°è±¡çº§äº‹ä»¶"

### ç†æ€§çœ‹å¾…

ç¤¾åŒºä¹Ÿæœ‰ç†æ€§çš„å£°éŸ³ï¼š

> "MCP ä¸æ˜¯ä¸‡èƒ½é’¥åŒ™ï¼Œæ›´åƒæ˜¯ä¸“ä¸šæ‰³æ‰‹â€”â€”åœ¨æŸäº›åœºæ™¯ä¸‹è¡¨ç°å‡ºè‰²ï¼Œåœ¨å…¶ä»–åœºåˆå´æ˜¾å¾—æ°´åœŸä¸æœã€‚"

**å½“å‰æŒ‘æˆ˜ï¼š**
- ç”Ÿæ€æˆç†Ÿåº¦ä»åœ¨å‘å±•ä¸­
- ç½‘ç»œä¼ è¾“çš„æ ‡å‡†åŒ–æ”¯æŒè¿˜ä¸å®Œå–„
- å·¥å…·é€‰æ‹©çš„ UI/UX æ¨¡å¼å°šæœªç»Ÿä¸€

### æœªæ¥è¶‹åŠ¿

- **æ ‡å‡†åŒ–**ï¼šæ›´å¤šå¤§å‚é‡‡çº³ï¼Œåè®®æ›´åŠ å®Œå–„
- **å®‰å…¨æ€§**ï¼šæˆæƒæœºåˆ¶ã€æ•°æ®éš”ç¦»æ›´åŠ æˆç†Ÿ
- **è¡Œä¸šå®šåˆ¶**ï¼šé’ˆå¯¹ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šè§£å†³æ–¹æ¡ˆ

---

## åä¸€ã€MCP å‘å¸ƒä¸ä½¿ç”¨å®Œæ•´æŒ‡å—

### npm æ³¨å†Œä¸ç™»å½•

#### 1. æ³¨å†Œ npm è´¦å·

è®¿é—® https://www.npmjs.com/ï¼Œç‚¹å‡» "Sign Up"ï¼Œå¡«å†™ï¼š
- **Username**ï¼ˆç”¨æˆ·åï¼‰ï¼šå…¨ç½‘å”¯ä¸€ï¼Œå¦‚ `zhangsan-dev`
- **Email**ï¼ˆé‚®ç®±ï¼‰ï¼šä½ çš„é‚®ç®±
- **Password**ï¼ˆå¯†ç ï¼‰ï¼šè‡³å°‘10ä¸ªå­—ç¬¦

éªŒè¯é‚®ç®±åå³å¯ä½¿ç”¨ã€‚

#### 2. ç»ˆç«¯ç™»å½•

```bash
npm login
# è¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±

# éªŒè¯ç™»å½•
npm whoami
```

---

### è‡ªåŠ¨åŒ–å‘å¸ƒè„šæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `publish-npm.sh`ï¼š

```bash
#!/bin/bash

echo "ğŸ“¦ å¼€å§‹å‘å¸ƒ MCP åˆ° npm..."

# 1. æ£€æŸ¥ç™»å½•
if ! npm whoami > /dev/null 2>&1; then
  echo "âŒ æœªç™»å½• npmï¼Œè¯·å…ˆæ‰§è¡Œ npm login"
  exit 1
fi

# 2. æ„å»ºé¡¹ç›®
echo "ğŸ”¨ æ„å»ºé¡¹ç›®..."
npm run build

# 3. æç¤ºé€‰æ‹©ç‰ˆæœ¬
echo "è¯·é€‰æ‹©ç‰ˆæœ¬æ›´æ–°ç±»å‹ï¼š"
echo "1) patch (1.0.0 â†’ 1.0.1)"
echo "2) minor (1.0.0 â†’ 1.1.0)"
echo "3) major (1.0.0 â†’ 2.0.0)"
read -p "é€‰æ‹© (1/2/3): " version_type

case $version_type in
  1) npm version patch ;;
  2) npm version minor ;;
  3) npm version major ;;
  *) echo "âŒ æ— æ•ˆé€‰æ‹©"; exit 1 ;;
esac

# 4. å‘å¸ƒ
echo "ğŸš€ å‘å¸ƒåˆ° npm..."
npm publish --access public

echo "âœ… å‘å¸ƒæˆåŠŸï¼"
echo "ğŸ“ ç”¨æˆ·å¯ä»¥é€šè¿‡ npx ä½ çš„åŒ…å ä½¿ç”¨"
```

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
chmod +x publish-npm.sh
./publish-npm.sh
```

---

### åœ¨ Cursor/Claude Code ä¸­ä½¿ç”¨

#### Cursor é…ç½®

ç¼–è¾‘ `~/.cursor/mcp.json`ï¼š

```json
{
  "mcpServers": {
    "my-mcp": {
      "command": "npx",
      "args": ["-y", "ä½ çš„npmåŒ…å"],
      "env": {
        "API_KEY": "your-key"
      }
    }
  }
}
```

#### Claude Code é…ç½®

ç¼–è¾‘ `~/.claude.json`ï¼š

```json
{
  "mcpServers": {
    "my-mcp": {
      "command": "npx",
      "args": ["-y", "ä½ çš„npmåŒ…å"]
    }
  }
}
```

é…ç½®åé‡å¯ AI åº”ç”¨å³å¯ä½¿ç”¨ã€‚

---

### åœ¨ AI Agent ä¸­ä½¿ç”¨ï¼ˆç¼–ç¨‹æ–¹å¼ï¼‰

#### æ–¹å¼ 1ï¼šSTDIO æ¨¡å¼ï¼ˆæ¨èï¼‰

```typescript
import { spawn } from 'child_process';
import { Client } from '@modelcontextprotocol/sdk/client/index';
import { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio';
import Anthropic from '@anthropic-ai/sdk';

// 1. å¯åŠ¨ MCP Server
const process = spawn('npx', ['-y', 'ä½ çš„npmåŒ…å']);

const transport = new StdioClientTransport({ command: process });
const mcpClient = new Client(
  { name: 'my-agent', version: '1.0.0' },
  { capabilities: {} }
);
await mcpClient.connect(transport);

// 2. è·å–å·¥å…·åˆ—è¡¨
const tools = await mcpClient.request({ method: 'tools/list' }, {});

// 3. è½¬æ¢ä¸º Claude API æ ¼å¼
const claudeTools = tools.tools.map(t => ({
  name: t.name,
  description: t.description,
  input_schema: t.inputSchema
}));

// 4. è°ƒç”¨ Claude API
const anthropic = new Anthropic();
const response = await anthropic.messages.create({
  model: 'claude-opus-4-5-20251101',
  max_tokens: 1024,
  tools: claudeTools,
  messages: [{ role: 'user', content: 'ç”¨æˆ·é—®é¢˜' }]
});

// 5. æ‰§è¡Œ MCP å·¥å…·
if (response.content[0].type === 'tool_use') {
  const result = await mcpClient.request({
    method: 'tools/call',
    params: {
      name: response.content[0].name,
      arguments: response.content[0].input
    }
  }, {});

  // å°†ç»“æœè¿”å›ç»™ Claude...
}
```

#### æ–¹å¼ 2ï¼šHTTP æ¨¡å¼ï¼ˆäº†è§£ï¼‰

å¯¹äºå¤šäººåä½œçš„ç”Ÿäº§ç¯å¢ƒï¼ŒMCP ä¹Ÿæ”¯æŒ HTTP æ¨¡å¼éƒ¨ç½²ã€‚ä½†é…ç½®è¾ƒä¸ºå¤æ‚ï¼Œæ¶‰åŠæœåŠ¡å™¨ã€ç½‘ç»œã€è®¤è¯ç­‰ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜ã€‚**æ—¥å¸¸ä½¿ç”¨æ¨è STDIO æ¨¡å¼ï¼ˆæ–¹å¼ 1ï¼‰**ã€‚

---

### é™„å½•ï¼špackage.json é…ç½®

```json
{
  "name": "ä½ çš„åŒ…å",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/index.js",
  "bin": {
    "ä½ çš„åŒ…å": "./dist/index.js"
  },
  "files": ["dist"],
  "scripts": {
    "build": "tsc",
    "prepublishOnly": "npm run build"
  }
}
```

**é‡è¦æç¤ºï¼š** å…¥å£æ–‡ä»¶ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯ `#!/usr/bin/env node`

---

### å¿«é€Ÿæ€»ç»“

**npm å‘å¸ƒæµç¨‹ï¼š**
```
æ³¨å†Œè´¦å· â†’ ç™»å½• â†’ æ„å»º â†’ å‘å¸ƒ
```

**ç”¨æˆ·ä½¿ç”¨ï¼š**
```bash
# Cursor é…ç½®åç›´æ¥ä½¿ç”¨ï¼Œæˆ–
npx ä½ çš„åŒ…å
```

**Agent è°ƒç”¨ï¼š**
```
å¯åŠ¨ MCP Client â†’ è·å–å·¥å…· â†’ è°ƒç”¨ Claude API â†’ æ‰§è¡Œå·¥å…·
```

å®Œæ•´ä»£ç ç¤ºä¾‹è¯·å‚è€ƒé¡¹ç›®ä¸­çš„ `node-mcp-demo` ç›®å½•ã€‚

---

## å‚è€ƒèµ„æº

**å®˜æ–¹èµ„æºï¼š**
- MCP å®˜ç½‘ï¼šhttps://modelcontextprotocol.io/
- MCP GitHubï¼šhttps://github.com/modelcontextprotocol
- Anthropic å…¬å‘Šï¼šhttps://www.anthropic.com/news/model-context-protocol

**æ¡†æ¶æ–‡æ¡£ï¼š**
- FastMCP TypeScriptï¼šhttps://github.com/punkpeye/fastmcp
- FastMCP Pythonï¼šhttps://github.com/jlowin/fastmcp

**å­¦ä¹ æ•™ç¨‹ï¼š**
- DataCamp æ•™ç¨‹ï¼šhttps://www.datacamp.com/tutorial/mcp-model-context-protocol
- DEV ç¤¾åŒºå®Œæ•´æŒ‡å—ï¼šhttps://dev.to/krlz/the-complete-guide-to-model-context-protocol-mcp-connect-ai-to-everything-in-2025-52g0
- çŸ¥ä¹æ·±å…¥ç ”ç©¶æŠ¥å‘Šï¼šhttps://zhuanlan.zhihu.com/p/1890070269206434486

**ç¤¾åŒºè®¨è®ºï¼š**
- è…¾è®¯æ–°é—» - MCP æ˜¯ AI æ™ºèƒ½ä½“çš„"ä¸‡èƒ½æ’å¤´"å—ï¼šhttps://news.qq.com/rain/a/20250325A04HJD00
- é˜¿é‡Œäº‘ - åå¤§å¼€æº MCP æœåŠ¡å™¨ï¼šhttps://developer.aliyun.com/article/1661309

---

> æœ¬æ–‡åŸºäºé¡¹ç›® `ai-mcp-study` å®æˆ˜æ€»ç»“ï¼ŒåŒ…å«å®Œæ•´çš„ Node.js Demoã€‚
