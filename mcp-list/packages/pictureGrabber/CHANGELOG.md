# 更新日志 (CHANGELOG)

本文件记录项目的所有版本更新。

---

## [1.2.1] - 2025-12-04

### 文档
- **CLAUDE.md 全面重构**：根据最新目录结构优化项目文档
  - 更新项目结构，反映模块化架构（5 个源文件 + .claude 目录）
  - 新增架构部分，详细描述每个模块的功能和导出函数
  - 新增数据流图，展示模块间的调用关系
  - 工具名称更正为 `pictureGrabber`，添加参数表格
  - 新增 Claude Code CLI 配置方式
  - 新增关键设计决策（9 项）
  - 新增修改配置指南，说明各可配置项的文件位置

---

## [1.2.0] - 2024-12-04

### 重构
- **代码模块化拆分**：将 434 行的单文件拆分为 5 个独立模块
  - `index.ts` (86行) - MCP 服务器入口，工具定义
  - `collector.ts` (156行) - 图片采集核心逻辑
  - `download.ts` (69行) - 图片下载功能
  - `overlay.ts` (186行) - 页面弹窗模板
  - `utils.ts` (46行) - 工具函数（路径、域名、时间戳等）

### 优化
- 提升代码可维护性，每个模块职责单一
- 消除弹窗 HTML/CSS 的重复代码
- 便于后续功能扩展和单元测试

---

## [1.1.0] - 2024-12-04

### 优化
- **弹窗显示时机优化**：使用 `page.addInitScript()` 预注入脚本，页面加载时立即显示"采集中"弹窗，而非等待页面完全加载后才显示
- 添加多重保障机制确保弹窗正确注入（DOMContentLoaded 事件 + 延时注入 + 后备注入）

### 新增
- 创建 CHANGELOG.md 版本更新记录文件
- 创建 .claude/rules.md 开发规范文件

---

## [1.0.0] - 2024-12-04

### 初始版本
- 实现 `collect_images` MCP 工具
- 支持采集网页上的 jpg/jpeg/png 格式图片
- 自动过滤 50x50 以下的小图
- 图片保存到桌面的 `图片采集_域名_时间戳` 目录
- 采集过程中显示 Loading 弹窗
- 采集完成后显示成功/失败结果
