# EventAnalyzer éªŒè¯æŒ‡å—

## ğŸ¯ å¿«é€ŸéªŒè¯æ¸…å•

### âœ… 1. æœåŠ¡å™¨éƒ¨ç½²éªŒè¯

```bash
# SSH ç™»å½•æœåŠ¡å™¨
ssh root@junfeng530.xyz

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
cd /opt/mcp-services/ai-mcp-study/mcp-list
docker-compose ps

# åº”è¯¥çœ‹åˆ°ï¼š
# NAME                  STATUS
# mcp-eventanalyzer     Up XX seconds

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs --tail=50 eventanalyzer
```

**æˆåŠŸæ ‡å¿—**ï¼š
- âœ… å®¹å™¨çŠ¶æ€ä¸º `Up`
- âœ… æ—¥å¿—ä¸­æ— æŠ¥é”™
- âœ… æ—¥å¿—æ˜¾ç¤º MCP æœåŠ¡å¯åŠ¨

---

### âœ… 2. Chrome æ‰©å±•å®‰è£…

1. **æ‰“å¼€ Chrome æ‰©å±•é¡µé¢**
   ```
   chrome://extensions/
   ```

2. **å¯ç”¨å¼€å‘è€…æ¨¡å¼**
   - ç‚¹å‡»å³ä¸Šè§’çš„"å¼€å‘è€…æ¨¡å¼"å¼€å…³

3. **åŠ è½½æ‰©å±•**
   - ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
   - é€‰æ‹©ç›®å½•ï¼š
     ```
     /Users/mac/Desktop/studyProject/ai-mcp-study/mcp-list/packages/EventAnalyzer/chrome-extension
     ```

4. **éªŒè¯å®‰è£…**
   - æ‰©å±•åˆ—è¡¨ä¸­å‡ºç° "Event Tracker"
   - å·¥å…·æ æ˜¾ç¤ºç»¿è‰²å›¾æ ‡ï¼ˆæ¡å½¢å›¾ï¼‰

---

### âœ… 3. æ•è·åŸ‹ç‚¹æ•°æ®æµ‹è¯•

1. **è®¿é—®æµ‹è¯•ç½‘ç«™**
   - æ‰“å¼€åŒ…å«åŸ‹ç‚¹çš„ç½‘é¡µï¼ˆå¦‚ï¼š`https://3d.dev.3d66.com`ï¼‰

2. **æ‰“å¼€æ‰©å±•**
   - ç‚¹å‡»å·¥å…·æ çš„ Event Tracker å›¾æ ‡

3. **æŸ¥çœ‹æ•è·åˆ—è¡¨**
   - åº”è¯¥çœ‹åˆ°æ•è·åˆ°çš„åŸ‹ç‚¹äº‹ä»¶åˆ—è¡¨
   - æ¯ä¸ªäº‹ä»¶æ˜¾ç¤ºï¼šäº‹ä»¶åã€æ—¶é—´æˆ³

4. **æµ‹è¯•å¤åˆ¶åŠŸèƒ½**
   - ç‚¹å‡»"æŸ¥çœ‹"æŒ‰é’®æŸ¥çœ‹è¯¦æƒ…
   - æµ‹è¯•"å¤åˆ¶äº‹ä»¶å"ã€"å¤åˆ¶ JSON"ã€"å¤åˆ¶ Base64"
   - æµ‹è¯•"å¤åˆ¶ MCP å‘½ä»¤"

**æˆåŠŸæ ‡å¿—**ï¼š
- âœ… èƒ½æ•è·åˆ°ç½‘ç»œè¯·æ±‚
- âœ… èƒ½è§£ç  Base64 æ•°æ®
- âœ… èƒ½æ­£ç¡®æ˜¾ç¤º JSON å†…å®¹

---

### âœ… 4. æœ¬åœ° MCP é…ç½®éªŒè¯

#### æ­¥éª¤ 1ï¼šå®‰è£… Python ä¾èµ–

```bash
cd /Users/mac/Desktop/studyProject/ai-mcp-study/mcp-list/packages/EventAnalyzer
pip install -r requirements.txt
```

**éªŒè¯**ï¼š
```bash
python -c "import mcp; print('MCP SDK å·²å®‰è£…')"
```

#### æ­¥éª¤ 2ï¼šæµ‹è¯• MCP æœåŠ¡å™¨

```bash
# ç›´æ¥è¿è¡ŒæœåŠ¡å™¨ï¼ˆä¼šç­‰å¾… stdio è¾“å…¥ï¼‰
python server.py
```

æŒ‰ `Ctrl+C` é€€å‡ºã€‚å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜æœåŠ¡å™¨å¯ä»¥æ­£å¸¸å¯åŠ¨ã€‚

#### æ­¥éª¤ 3ï¼šé…ç½® Cursor/Claude Code

**Cursor é…ç½®**ï¼š
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
code ~/.config/Cursor/User/mcp.json
```

**Claude Code é…ç½®**ï¼š
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
code ~/.claude/mcp.json
```

**æ·»åŠ é…ç½®**ï¼š
```json
{
  "mcpServers": {
    "EventAnalyzer": {
      "command": "python",
      "args": [
        "/Users/mac/Desktop/studyProject/ai-mcp-study/mcp-list/packages/EventAnalyzer/server.py"
      ]
    }
  }
}
```

#### æ­¥éª¤ 4ï¼šé‡å¯ IDE å¹¶æµ‹è¯•

1. é‡å¯ Cursor/Claude Code
2. æ‰“å¼€èŠå¤©çª—å£
3. è¾“å…¥æµ‹è¯•å‘½ä»¤ï¼š

```
æŸ¥è¯¢ LlwResExposure äº‹ä»¶çš„å­—æ®µå®šä¹‰
```

**æœŸæœ›ç»“æœ**ï¼š
- Claude è°ƒç”¨ `query_event_fields` å·¥å…·
- è¿”å›çº¦ 78 ä¸ªå­—æ®µçš„è¯¦ç»†ä¿¡æ¯
- åŒ…å«å­—æ®µç±»å‹ã€è¯´æ˜ã€æšä¸¾å€¼

---

## ğŸ§ª åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯• 1ï¼šæŸ¥è¯¢äº‹ä»¶å­—æ®µ

**è¾“å…¥**ï¼š
```
æŸ¥è¯¢ LlwResExposure äº‹ä»¶çš„æ‰€æœ‰å­—æ®µå®šä¹‰
```

**æœŸæœ›è¾“å‡º**ï¼š
```json
{
  "event": "LlwResExposure",
  "total_fields": 78,
  "fields": {
    "platform_type": {
      "type": "NUMBER",
      "tips": "å¹³å°ç±»å‹",
      "desc": "1-PC, 2-H5, 3-å°ç¨‹åº",
      "trans": "{\"1\":\"PC\",\"2\":\"H5\",\"3\":\"å°ç¨‹åº\"}"
    },
    ...
  }
}
```

---

### æµ‹è¯• 2ï¼šåˆ†æåŸ‹ç‚¹æ•°æ®

**è¾“å…¥**ï¼š
```
åˆ†æè¿™ä¸ªåŸ‹ç‚¹æ•°æ®ï¼š
eyJwcm9wZXJ0aWVzIjp7InBsYXRmb3JtX3R5cGUiOjIsInByb2R1Y3RfbmFtZSI6MCwiaXNfbG9naW4iOnRydWV9fQ==
```

**æœŸæœ›è¾“å‡º**ï¼š
- è§£æåçš„ JSON æ•°æ®
- å­—æ®µç±»å‹æ£€æŸ¥ç»“æœ
- æœªçŸ¥å­—æ®µè­¦å‘Šï¼ˆå¦‚æœæœ‰ï¼‰
- å­—æ®µè¦†ç›–ç‡ç»Ÿè®¡

---

### æµ‹è¯• 3ï¼šè§£é‡Šå­—æ®µå«ä¹‰

**è¾“å…¥**ï¼š
```
platform_type å­—æ®µæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
```

**æœŸæœ›è¾“å‡º**ï¼š
```
å­—æ®µåï¼šplatform_type
ç±»å‹ï¼šNUMBER
è¯´æ˜ï¼šå¹³å°ç±»å‹
æšä¸¾å€¼ï¼š
  1 = PC
  2 = H5
  3 = å°ç¨‹åº
```

---

### æµ‹è¯• 4ï¼šæœç´¢å­—æ®µå®ç°

**è¾“å…¥**ï¼š
```
åœ¨é¡¹ç›®ä¸­æœç´¢ ll_id å­—æ®µçš„å®ç°ä½ç½®
```

**æœŸæœ›è¾“å‡º**ï¼š
- æ–‡ä»¶è·¯å¾„åˆ—è¡¨
- ä»£ç ç‰‡æ®µï¼ˆåŒ…å«ä¸Šä¸‹æ–‡ï¼‰
- åŒ¹é…ä½ç½®

---

### æµ‹è¯• 5ï¼šæ¯”è¾ƒäº‹ä»¶å·®å¼‚

**è¾“å…¥**ï¼š
```
æ¯”è¾ƒ LlwResExposure å’Œ LlwResDownBtnClick äº‹ä»¶çš„å·®å¼‚
```

**æœŸæœ›è¾“å‡º**ï¼š
```json
{
  "event1": "LlwResExposure",
  "event2": "LlwResDownBtnClick",
  "common_fields": ["platform_type", "product_name", ...],
  "event1_only": ["field_a", "field_b"],
  "event2_only": ["field_x", "field_y"],
  "statistics": {
    "common_count": 50,
    "event1_only_count": 10,
    "event2_only_count": 8
  }
}
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šChrome æ‰©å±•æ²¡æœ‰æ•è·åˆ°æ•°æ®

**å¯èƒ½åŸå› **ï¼š
- ç½‘é¡µæ²¡æœ‰å‘é€åŸ‹ç‚¹è¯·æ±‚
- URL å‚æ•°ä¸­æ²¡æœ‰ `data` å­—æ®µ
- è¯·æ±‚ä¸åŒ…å« `tpdi` å…³é”®å­—

**è§£å†³æ–¹æ³•**ï¼š
1. æ‰“å¼€ Chrome DevToolsï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. åˆ·æ–°é¡µé¢ï¼ŒæŸ¥æ‰¾åŒ…å« `tpdi` çš„è¯·æ±‚
4. æ£€æŸ¥ URL å‚æ•°ä¸­æ˜¯å¦æœ‰ `data` å­—æ®µ

---

### é—®é¢˜ 2ï¼šMCP å·¥å…·è°ƒç”¨å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- Python ä¾èµ–æœªå®‰è£…
- è·¯å¾„é…ç½®é”™è¯¯
- API æ¥å£ä¸å¯è®¿é—®

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. éªŒè¯ä¾èµ–
pip list | grep mcp

# 2. æµ‹è¯• API æ¥å£
curl "https://tptest-3d66.top/trans/api/event?event=LlwResExposure"

# 3. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
python server.py  # æ‰‹åŠ¨è¿è¡Œï¼ŒæŸ¥çœ‹é”™è¯¯
```

---

### é—®é¢˜ 3ï¼šBase64 è§£ç å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- æ•°æ®è¢«äºŒæ¬¡ç¼–ç 
- æ•°æ®æ ¼å¼ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•**ï¼š
1. ä½¿ç”¨ Chrome æ‰©å±•è‡ªåŠ¨è§£ç 
2. æ‰‹åŠ¨æµ‹è¯•è§£ç ï¼š

```python
import base64
import urllib.parse
import json

# URL è§£ç 
url_decoded = urllib.parse.unquote("your_base64_string")
# Base64 è§£ç 
base64_decoded = base64.b64decode(url_decoded).decode('utf-8')
# JSON è§£æ
data = json.loads(base64_decoded)
print(json.dumps(data, indent=2, ensure_ascii=False))
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ­£å¸¸è¿è¡ŒæŒ‡æ ‡

- **API å“åº”æ—¶é—´**ï¼š< 1 ç§’
- **Base64 è§£ç **ï¼š< 100ms
- **å­—æ®µæŸ¥è¯¢**ï¼š< 500msï¼ˆå¸¦ç¼“å­˜ï¼‰
- **ä»£ç æœç´¢**ï¼š< 2 ç§’ï¼ˆå–å†³äºé¡¹ç›®å¤§å°ï¼‰

### èµ„æºå ç”¨

- **å†…å­˜å ç”¨**ï¼š< 100MB
- **CPU ä½¿ç”¨**ï¼šç©ºé—²æ—¶ < 1%
- **Chrome æ‰©å±•**ï¼š< 10MB

---

## âœ… éªŒè¯å®Œæˆæ ‡å¿—

å…¨éƒ¨åŠŸèƒ½éªŒè¯é€šè¿‡åï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š

- âœ… Chrome æ‰©å±•èƒ½æ•è·åŸ‹ç‚¹æ•°æ®
- âœ… èƒ½æ­£ç¡®è§£ç  Base64 æ•°æ®
- âœ… MCP å·¥å…·èƒ½æˆåŠŸè°ƒç”¨
- âœ… èƒ½æŸ¥è¯¢äº‹ä»¶å­—æ®µå®šä¹‰
- âœ… èƒ½åˆ†æåŸ‹ç‚¹æ•°æ®è´¨é‡
- âœ… èƒ½è§£é‡Šå­—æ®µå«ä¹‰
- âœ… èƒ½æœç´¢å­—æ®µå®ç°
- âœ… èƒ½æ¯”è¾ƒäº‹ä»¶å·®å¼‚

---

## ğŸš€ åç»­ä½¿ç”¨

éªŒè¯æˆåŠŸåï¼Œæ‚¨å¯ä»¥ï¼š

1. **æ—¥å¸¸ä½¿ç”¨**ï¼šç”¨ Chrome æ‰©å±•æ•è·åŸ‹ç‚¹ï¼Œç”¨ MCP å·¥å…·åˆ†æ
2. **é›†æˆåˆ°å·¥ä½œæµ**ï¼šåœ¨ Cursor/Claude Code ä¸­ç›´æ¥åˆ†æåŸ‹ç‚¹é—®é¢˜
3. **å›¢é˜Ÿå…±äº«**ï¼šåˆ†äº« Chrome æ‰©å±•ç»™å›¢é˜Ÿæˆå‘˜

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. Chrome æ‰©å±•çš„æ§åˆ¶å°æ—¥å¿—ï¼ˆF12 â†’ Consoleï¼‰
2. MCP æœåŠ¡å™¨çš„é”™è¯¯ä¿¡æ¯
3. å…·ä½“çš„æµ‹è¯•æ•°æ®å’ŒæœŸæœ›ç»“æœ
